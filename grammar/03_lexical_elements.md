# 3장. C 언어의 단어: 코드를 이루는 최소 단위

지금까지는 숲을 보았다.

- **C 프로그램이 어디서 시작하는지:** `main`
- **어떤 범위로 묶이는지:** `{ }`
- **어떤 순서로 실행되는지:** 차례대로

영어와 비교해보면, 문단(블록)을 나누고 문장을 왼쪽 위에서부터 읽어 내려가는 '읽기 규칙'을 배운 셈이다. 

다음 순서는 단어를 배울 차례다.

영어 문장을 이해하려면 알파벳이 모여 만든 단어의 뜻을 알아야 하듯, C 언어도 코드를 구성하는 단어 하나하나를 알아야 비로소 해석할 수 있다.

## 3.1 토큰(token): C 코드의 글자들에 의미를 부여하는 단위

컴파일러는 소스 코드를 먼저 여러 조각으로 나눈 뒤에 의미를 해석한다. 그 과정에서 더 이상 나누지 않고 하나의 의미로 다루는 단위를 토큰(token)이라고 부른다.

다음과 같은 한글 문장을 생각해보자. 

```
1 + 1을 계산하라. 
```

문장을 의미 있는 조각으로 나누면 다음과 같다. 

`1`, `+`, `1`, `을`, `계산하라`, `.`

더 잘게 조각을 철자 단위로 나눌 수는 있지만, 문장을 해석하는데 필요한 의미 단위는 아니다.

**컴파일러가 보는 세상: 토큰의 나열**

우리가 2장에서 다음과 같은 간단한 프로그램을 봤었다.

```c
int main()
{
        return 0;
}
```

컴파일러 눈에는 이 코드가 다음과 같은 토큰들의 나열로 보인다. 

`int`, `main`, `(`, `)`, `{`, `return`, `0`, `;`, `}` 

여기서 한 가지 주목할 점은 컴파일러가 토큰으로 나누고 나면, 그 목록에는 띄어쓰기, 줄바꿈, 탭 같은 공백이 없다는 것이다. 공백은 토큰을 구분하는 역할을 할 뿐, 토큰 자체는 아니다.

또 다른 주목할 점은 단어(`int`, `main`)뿐만 아니라 기호(`(`, `{`, `;`) 하나하나도 모두 독립적인 토큰으로 취급된다는 것이다.

또한, 영어에 명사, 고유 명사, 동사 같은 품사가 있듯이 토큰에도 종류가 있다. 다음 절들에서 토큰의 종류를 하나씩 알아본다. 

## 3.2 C 코드를 토큰으로 나누는 규칙

우리가 글을 읽을 때 단어를 구분하는 무의식적인 규칙이 있듯이, 컴파일러도 코드를 토큰으로 나눌 때 엄격한 규칙을 따른다.

한글 문장 `코드를 코딩하다?`를 예로 들어보자. 우리는 이것을 자연스럽게 세 조각으로 나눈다.

`코드를`, `코딩하다`, `?`

여기서 사용된 규칙은 크게 두 가지다.

- **띄어쓰기:** 공백이 있으면 단어가 끝난다. (`코드를`과 `코딩하다` 사이)
- **문장부호:** 기호는 글자와 붙어 있어도 별개의 단어로 친다. (`코딩하다`와 `?` 사이)

C 언어도 비슷한 문법 규칙에 따라 토큰을 나눈다.

**실전 분석: `int main()`**

간단한 C 프로그램을 컴파일러가 어떻게 쪼개는지 단계별로 보자.

```c
int main()
{
        return 0;
}
```

- **공백 규칙:** 

  공백(띄어쓰기, 탭, 줄바꿈)은 토큰을 분리하는 가장 명확한 경계다.
  `int` 뒤에 공백이 있으므로, 컴파일러는 `int`를 하나의 토큰으로 확정한다.

- **기호 규칙:**

  `main`을 읽다가 기호 `(`를 만났다.
  글자와 기호는 서로 다른 종류의 문자이므로, 붙어 있어도 분리된다.

  따라서 `main`과 `(`는 서로 다른 토큰으로 분리된다.

  대부분의 기호는 한 글자만으로 독립적인 토큰이 된다.
  `(`, `)`, `{`, `;`, `}`는 각각 하나의 토큰이다.

- **숫자 규칙:**
  
  숫자는 문맥에 따라 다르게 결합한다.
  
  - `return 0;`에서 숫자 `0`은 `return`과 독립적으로 토큰을 형성한다.
  - 문자 뒤에 숫자가 붙어있으면, `value1`처럼 하나의 토큰이 될 수 있다.
  - 숫자끼리 붙어있어도, `123`처럼 하나의 토큰이 될 수 있다.

**요약: 컴파일러의 2가지 원칙**

컴파일러는 다음 원칙을 반복해서 코드를 읽는다.

- **최대한 길게 읽는다**

  (욕심쟁이 원칙, maximal munch)
  가능한 한 긴 문자열을 하나의 토큰으로 만든다. 그래서 `i`, `n`, `t`를 따로 떼지 않고 `int`로 읽는다.

- **더 이상 같은 규칙으로 읽을 수 없으면 나눈다**

  공백을 만나거나, 서로 다른 종류의 문자를 만나 더 이상 같은 규칙으로 읽을 수 없으면 그 자리에서 토큰을 완성한다.

두 원칙을 반복적으로 적용하는 과정을 통해 소스 코드는 토큰들의 나열로 변환된다.

> [!NOTE]
>
> **기호 두개가 합쳐지는 경우**
>
> 대부분의 기호는 한 글자만으로 토큰이 되지만, `==`, `<=`, `++`처럼 두 개가 합쳐지는 경우도 있다.
> 뒤에서 연산자들을 다룰 때 배운다.


## 3.3 토큰의 종류

C 언어라는 세계를 구성하는 토큰은 입문 단계에서는 역할에 따라 크게 키워드, 식별자, 리터럴, 구두점, 연산자의 5가지로 나뉜다.
하나씩 자세히 알아가보자. 

### 3.3.1 키워드 (keyword): C 언어의 예약석

우리말에서 사전에 뜻이 적혀 있는 단어는 '학교'처럼 그 단어를 들으면 누구나 떠올리는 정해진 의미가 있다. C 언어 세상에서도 특별한 용도로 쓰기로 약속된 단어들이 있다.

프로그래밍 세상에서는 이러한 단어를 키워드(keyword) 또는 예약어(reserved word)라고 부른다.

키워드는 컴파일러가 "아, 이건 문법이구나!"라고 바로 알아채야 하기 때문에, 우리가 마음대로 뜻을 바꿀 수 없다. 또한, 예약된 자리이기 때문에 다음 절에 나오는 식별자로 사용할 수 없다. 예를 들어 `int`를 식별자로 사용할 수는 없다.

간단한 C 프로그램에서도 키워드가 있었다.

- **`int`:** 정수 타입을 나타내는 키워드
- **`return`:** 실행을 끝내고 값을 돌려준다는 의미를 가지는 키워드

> [!Tip]
> **코드 에디터에서 키워드를 표시해주는 방법**
> 
> 대부분의 코드 에디터에서 키워드는 파란색이나 보라색처럼 눈에 띄는 색으로 자동 표시된다.
> 

### 3.3.2 식별자 (identifier): 우리가 지어주는 이름

'수원', '화성'처럼 대상을 구분하기 위해 붙여준 고유한 이름을 프로그래밍에서는 식별자(identifier)라고 한다.
키워드가 이미 정해진 단어라면, 식별자는 프로그래머가 필요에 따라 직접 지어주는 이름이다.

간단한 C 프로그램에서도 식별자가 있었다.

- **`main` (메인):** 프로그램의 시작 함수를 가리키는 이름 (C 언어의 약속된 식별자)

`main`은 식별자 중에서는 가장 특별한데, 일반적인 환경에서 실행되는 C 프로그램은 `main`이라는 이름의 함수에서 시작한다.

> [!Tip]
> **이름을 짓는 규칙**
>
> 식별자로 쓸 이름은 마음대로 지을 수 있지만, 최소한의 규칙이 있다. 보통 영문자, 숫자, 언더바(`_`)를 조합해서 만든다.
> 영문자를 쓸 때 대소문자가 구분되고, 숫자로 시작할 수는 없다.

### 3.3.3 리터럴 (literal): 코드에 적힌 값

우리가 대화할 때 "오후 3시"라고 말하는 것처럼, 문장 안에서 변하지 않는 실제 데이터 값을 리터럴이라고 한다. 코드에 직접 적혀있기 때문에 조작할 수 없다.

간단한 C 프로그램에서도 리터럴이 있었다.

- **`0`:** 정수 리터럴로 숫자 0을 의미한다. 

간단한 C 프로그램에 나온 `return 0;`은 관례적으로 프로그램이 정상적으로 종료되었음을 의미한다. 

> [!NOTE]
>
> **용어 정리: 리터럴과 상수**
>
> C 표준 문서에서는 리터럴 대신 상수(constant)라는 용어를 써서 정수 상수, 문자 상수와 같이 부른다.
> 하지만 상수는 값을 담고 있지만 한 번 정해지면 바꿀 수 없는 데이터 공간이라는 의미도 담고 있기 때문에,
> 여기서는 명확한 표현을 위해 리터럴이라는 용어를 사용한다. 

### 3.3.4 구두점(punctuator): 문장의 구분 기호

우리말에서 단어만 나열하면 문장을 이해하기 어렵기 때문에, 글을 쓸 때 마침표(`.`)나 쉼표(`,`)가 필요하다. 
C 코드에서도 문장의 끝을 알리거나 구조를 묶어주는 기호들이 필요하며, 이러한 기호를 구두점(punctuator)이라고 한다.

간단한 C 프로그램에도 구두점이 있었다. 

- **`;` (세미콜론):** 문장의 마침표 역할 ("여기서 명령이 끝났어")
- **`{ }` (중괄호):** 여러 문장을 하나로 묶는 울타리 역할
- **`( )` (소괄호):** 함수와 관련된 부분을 표시하거나, 연산 순서를 명확히 하는 데 사용된다.

구두점은 연산자와 달리 값을 계산 하지 않고, 코드를 묶거나 나누는 구조적인 역할만 한다.

### 3.3.5 연산자(operator): 계산을 위한 기호

마지막으로 덧셈(`+`), 뺄셈(`-`) 같은 기호들도 토큰의 한 종류로 연산자(operator)라고 부른다. 연산자는 값을 계산하거나 비교하는 동작을 수행한다. 지금까지의 예제에는 연산자가 거의 등장하지 않았지만, 5장에서 자세히 다룬다.
        
## 3.4 공백(whitespace): 투명한 글자

C 코드를 읽거나 쓰다 보면 눈에 보이지 않는 글자들이 있다.

- 띄어쓰기 (space)
- 줄바꿈 (newline 문자)
- 탭 (tab)

프로그래밍에서는 이들을 통틀어 공백(whitespace)라고 부른다. 종이의 여백(white space)처럼 보이기 때문이다.

**컴파일러에게 공백이란?**

컴파일러에게 공백은 단지 토큰과 토큰을 나누는 경계선일 뿐, 의미 있는 요소로 남지 않는다.

다음 두 코드는 컴파일러 입장에서 100% 똑같은 코드다.

**보기 좋은 코드**
```c
return 0;
```

**엉망인 코드**
```c
return     0
;
```

두 번째 코드는 사람이 보기에는 암호 같지만, 컴파일러는 `return`, `0`, `;` 세 개의 토큰을 찾아내는 데 아무런 문제가 없다.

**예외: 공백이 중요한 경우**

하지만 공백이 데이터의 일부로 취급되거나 구두점 역할을 하는 곳이 있다. 첫번째로 따옴표(`" "`) 안이 있다. 따옴표는 소스 코드에 문자 여러개를 데이터로 적은 문자열 리터럴(string literal)이라는 것을 나타낸다.

```c
printf("Hello World");
```

여기서 `Hello`와 `World` 사이의 띄어쓰기는 토큰을 나누는 용도가 아니라, 문자열 리터럴 데이터의 일부다. 따라서 컴파일러는 이 공백을 지우지 않고 그대로 화면에 출력한다.

두번째로 공백이 중요한 지점으로 `#` 다음이 있다. 줄 앞에 `#`이 붙은 문장은 전처리 지시문(preprocessor directive)이라고 불리는데, 컴파일러가 일을 시작하기 전에 텍스트 치환 같은 작업를 수행한다. 

```c
#define MAX_SIZE 100
```

일반적인 C 코드는 세미콜론(`;`)으로 문장이 끝나지만, `#`으로 시작하는 문장에서는 `;`로 끝나지 않으며, 기본적으로 줄바꿈이 하나의 지시문의 끝을 나타낸다. 

**우리는 왜 공백을 쓸까?**

컴퓨터가 신경 쓰지 않는데도 우리가 들여쓰기를 해서 줄을 맞추고, 적절히 띄어 쓰기를 하는 이유는 오직 사람을 위해서다.
나중에 코드를 다시 볼 '미래의 나'와 '동료 개발자'가 코드를 쉽게 읽을 수 있도록 하는 배려, 이것이 바로 가독성(readability)이다.
가독성은 프로그램의 기능에는 영향을 주지 않지만, 유지보수에는 큰 영향을 준다.
읽기 쉬운 코드는 오류를 줄인다. 

> [!TIP]
> **코딩 스타일 (coding style)**
>
> 개발자들은 공백을 어떻게 쓸지 약속을 정해두곤 하는데, 이를 '코딩 스타일'이라고 부른다.
> 예를 들어 "연산자 양옆은 한 칸씩 띄운다(`1 + 1`)" 같은 규칙들이 있다.
> 코딩 스타일은 프로그램을 더 읽기 쉽게 만든다.
